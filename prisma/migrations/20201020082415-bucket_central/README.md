# Migration `20201020082415-bucket_central`

This migration has been generated by Shane Linden at 10/20/2020, 10:24:15 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."CommandTopic" DROP CONSTRAINT "CommandTopic_topicid_fkey"

ALTER TABLE "public"."Command" DROP COLUMN "topicId"

ALTER TABLE "public"."CommandTopic" DROP CONSTRAINT "CommandTopic_pkey",
DROP COLUMN "topicid",
ADD COLUMN "topicId" integer   NOT NULL ,
ADD PRIMARY KEY ("cmdId", "topicId")

ALTER TABLE "public"."CommandTopic" ADD FOREIGN KEY ("topicId")REFERENCES "public"."Topic"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201020080723-bucket_central..20201020082415-bucket_central
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Category {
   id          Int    @id @default(autoincrement())
@@ -16,9 +16,8 @@
 }
 model Command {
   id           Int            @id @default(autoincrement())
-  topicId      Int
   command      String         @unique
   description  String
   createdAt    DateTime       @default(now())
   updatedAt    DateTime       @updatedAt
@@ -37,9 +36,9 @@
 model CommandTopic {
   cmdId   Int
   command Command @relation(fields: [cmdId], references: [id])
-  topicid Int
-  topic   Topic   @relation(fields: [topicid], references: [id])
+  topicId Int
+  topic   Topic   @relation(fields: [topicId], references: [id])
-  @@id([cmdId, topicid])
+  @@id([cmdId, topicId])
 }
```


